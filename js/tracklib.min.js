/* evtrack -- Lib module */
var TrackLib={};TrackLib.XPath={queryXPath:function(a,b){var c;if(typeof a.evaluate==="function"){c=a.evaluate(b,a.documentElement,null,XPathResult.ANY_TYPE,null)}else{try{a.setProperty("SelectionLanguage","XPath");c=a.selectNodes(b)}catch(d){c=false}}return c},getXPathNodes:function(b,c){var d=this.queryXPath(b,c);var a=[];var e=d.iterateNext();while(e){a.push(e);e=d.iterateNext()}return a},getXPath:function(g){var e=(g.ownerDocument instanceof HTMLDocument);var d=this.getNodePath(g),c=[];for(var b in d){var f=d[b],h;if(f.nodeType==1){if(b==0&&f.hasAttribute("id")){c.push("/*[@id='"+f.getAttribute("id")+"']")}else{var a=f.tagName;if(e){a=a.toLowerCase()}h=this.getNodeIndex(f);if(h!=null){c.push(a+"["+h+"]")}else{c.push(a)}}}else{if(f.nodeType==3){h=this.getTextNodeIndex(f);if(h!=null){c.push("text()["+h+"]")}else{c.push("text()")}}}}return"/"+c.join("/")},getNodeIndex:function(b){if(b.nodeType!=1||b.parentNode==null){return null}var c=this.getChildNodesWithTagName(b.parentNode,b.tagName);if(c.length==1&&c[0]==b){return null}for(var a=0;a<c.length;a++){if(c[a]==b){return a+1}}throw"couldn't find node in parent's list: "+b.tagName},getTextNodeIndex:function(b){var c=this.getChildTextNodes(b.parentNode);if(c.length==1&&c[0]==b){return null}for(var a=0;a<c.length;a++){if(c[a]==b){return a+1}}throw"couldn't find node in parent's list: "+b.tagName},getChildNodesWithTagName:function(c,b){var a=[],d=c.firstChild;while(d!=null){if(d.tagName&&d.tagName==b){a.push(d)}d=d.nextSibling}return a},getChildTextNodes:function(b){var a=[],c=b.firstChild;while(c!=null){if(c.nodeType==3){a.push(c)}c=c.nextSibling}return a},getNodePath:function(b){var a=[];while(b.nodeType==1||b.nodeType==3){a.unshift(b);if(b.nodeType==1&&b.hasAttribute("id")){return a}b=b.parentNode}return a},getNodeValues:function(b){var a=[];for(var c in b){a.push(b[c].nodeValue)}return a}};TrackLib.XHR={createXMLHTTPObject:function(){var b=false;var c=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var a=0;a<c.length;++a){try{b=c[a]()}catch(d){continue}break}return b},sendAjaxRequest:function(a){var d=a.xmlhttp?a.xmlhttp:this.createXMLHTTPObject();var e=!TrackLib.Util.sameDomain(window.location.href,a.url);if(e&&window.XDomainRequest){d=new XDomainRequest()}if(!d){return false}var f=a.postdata?"POST":"GET";var b=a.hasOwnProperty("async")?a.async:true;d.open(f,a.url,b);var c=window.XDomainRequest&&(d instanceof XDomainRequest);if(a.postdata&&!c){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}if(c){d.onload=function(){if(typeof a.callback==="function"){a.callback(d.responseText)}}}else{d.onreadystatechange=function(){if(d.readyState==4&&typeof a.callback==="function"){a.callback(d.responseText)}}}d.send(a.postdata)}};TrackLib.Events={add:function(c,b,a){if(!c){return false}if(c.addEventListener){c.addEventListener(b,a,false)}else{if(c.attachEvent){c.attachEvent("on"+b,a)}else{c[b+a]=function(){a(window.event)}}}},remove:function(c,b,a){if(!c){return false}if(c.removeEventListener){c.removeEventListener(b,a,false)}else{if(c.detachEvent){c.detachEvent("on"+b,a)}else{c[b+a]=null}}},fix:function(a){a=a||window.event;if(!a.target){a.target=a.srcElement||document}if(a.target.nodeType==3){a.target=a.target.parentNode}if(typeof a.metaKey==="undefined"){a.metaKey=a.ctrlKey}a.id=a.identifier||0;return a}};TrackLib.Dimension={getWindowSize:function(){var c=document;var a=(window.innerWidth)?window.innerWidth:(c.documentElement&&c.documentElement.clientWidth)?c.documentElement.clientWidth:(c.body&&c.body.clientWidth)?c.body.clientWidth:0;var b=(window.innerHeight)?window.innerHeight:(c.documentElement&&c.documentElement.clientHeight)?c.documentElement.clientHeight:(c.body&&c.body.clientHeight)?c.body.clientHeight:0;return{width:a,height:b}},getDocumentSize:function(){var c=document;var a=(window.innerWidth&&window.scrollMaxX)?window.innerWidth+window.scrollMaxX:(c.body&&c.body.scrollWidth>c.body.offsetWidth)?c.body.scrollWidth:(c.body&&c.body.offsetWidth)?c.body.offsetWidth:0;var b=(window.innerHeight&&window.scrollMaxY)?window.innerHeight+window.scrollMaxY:(c.body&&c.body.scrollHeight>c.body.offsetHeight)?c.body.scrollHeight:(c.body&&c.body.offsetHeight)?c.body.offsetHeight:0;return{width:a,height:b}},getPageSize:function(){var d=this.getWindowSize(),c=this.getDocumentSize();var a=(c.width<d.width)?d.width:c.width;var b=(c.height<d.height)?d.height:c.height;return{width:a,height:b}}};TrackLib.Util={sameDomain:function(){var d,b=true;for(var c=0,a=arguments.length;c<a;++c){if(c>0){b=(this.getDomain(d)==this.getDomain(arguments[c]))}d=arguments[c]}return b},getDomain:function(a){var c,b=document.createElement("a");b.href=a;c=b.hostname;b=null;return c},onDOMload:function(c){if(arguments.callee.done){return}arguments.callee.done=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",c,false)}else{if(document.attachEvent){try{document.write("<script id=__ie_onload defer=true src=//:><\/script>");var a=document.getElementById("__ie_onload");a.onreadystatechange=function(){if(this.readyState==="complete"){c()}}}catch(b){}}else{TrackLib.Events.add(window,"load",c)}}},serialize:function(c){var a,b=document.createElement("div");b.appendChild(c);a=b.innerHTML;b=null;return a},serializeAttrs:function(c){var e={};if(c&&c.attributes){e[c.nodeName]={};for(var b=0,a=c.attributes.length;b<a;b++){var d=c.attributes[b];if(d.specified){e[c.nodeName][d.name]=d.value}}}return JSON.stringify(e)}};