/*! evtrack -- Lib module */
var TrackLib={};TrackLib.XPath={queryXPath:function(a,c){var b;if(typeof a.evaluate==="function"){b=a.evaluate(c,a.documentElement,null,XPathResult.ANY_TYPE,null)}else{try{a.setProperty("SelectionLanguage","XPath");b=a.selectNodes(c)}catch(e){b=false}}return b},getXPathNodes:function(b,e){var c=this.queryXPath(b,e);var a=[];var f=c.iterateNext();while(f){a.push(f);f=c.iterateNext()}return a},getXPath:function(h){var f=(h.ownerDocument instanceof HTMLDocument);var e=this.getNodePath(h);var c=[];for(var b in e){var j;var g=e[b];if(g.nodeType==1){if(b==0&&g.hasAttribute("id")){c.push("/*[@id='"+g.getAttribute("id")+"']")}else{var a=g.tagName;if(f){a=a.toLowerCase()}j=this.getNodeIndex(g);if(j!=null){c.push(a+"["+j+"]")}else{c.push(a)}}}else{if(g.nodeType==3){j=this.getTextNodeIndex(g);if(j!=null){c.push("text()["+j+"]")}else{c.push("text()")}}}}return"/"+c.join("/")},getNodeIndex:function(b){if(b.nodeType!=1||b.parentNode==null){return null}var c=this.getChildNodesWithTagName(b.parentNode,b.tagName);if(c.length==1&&c[0]==b){return null}for(var a=0;a<c.length;a++){if(c[a]==b){return a+1}}throw"couldn't find node in parent's list: "+b.tagName},getTextNodeIndex:function(b){var c=this.getChildTextNodes(b.parentNode);if(c.length==1&&c[0]==b){return null}for(var a=0;a<c.length;a++){if(c[a]==b){return a+1}}throw"couldn't find node in parent's list: "+b.tagName},getChildNodesWithTagName:function(c,b){var a=[];var e=c.firstChild;while(e!=null){if(e.tagName&&e.tagName==b){a.push(e)}e=e.nextSibling}return a},getChildTextNodes:function(b){var a=[];var c=b.firstChild;while(c!=null){if(c.nodeType==3){a.push(c)}c=c.nextSibling}return a},getNodePath:function(b){var a=[];while(b.nodeType==1||b.nodeType==3){a.unshift(b);if(b.nodeType==1&&b.hasAttribute("id")){return a}b=b.parentNode}return a},getNodeValues:function(b){var a=[];for(var c in b){a.push(b[c].nodeValue)}return a}};TrackLib.XHR={createXMLHTTPObject:function(){var b=false;var c=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var a=0;a<c.length;++a){try{b=c[a]()}catch(f){continue}break}return b},sendAjaxRequest:function(a){var e=a.xmlhttp?a.xmlhttp:this.createXMLHTTPObject();var f=!TrackLib.Util.sameDomain(window.location.href,a.url);if(f&&window.XDomainRequest){e=new XDomainRequest()}if(!e){return false}var g=a.postdata?"POST":"GET";var b=a.hasOwnProperty("async")?a.async:true;e.open(g,a.url,b);var c=window.XDomainRequest&&(e instanceof XDomainRequest);if(a.postdata&&!c){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}if(c){e.onload=function(){if(typeof a.callback==="function"){a.callback(e.responseText)}}}else{e.onreadystatechange=function(){if(e.readyState==4&&typeof a.callback==="function"){a.callback(e.responseText)}}}e.send(a.postdata)}};TrackLib.Events={add:function(c,b,a){if(!c){return false}if(c.addEventListener){c.addEventListener(b,a,false)}else{if(c.attachEvent){c["e"+b+a]=a;c[b+a]=function(){c["e"+b+a](window.event)};c.attachEvent("on"+b,c[b+a])}}},remove:function(c,b,a){if(!c){return false}if(c.removeEventListener){c.removeEventListener(b,a,false)}else{if(c.detachEvent){c.detachEvent("on"+b,c[b+a]);c[b+a]=null}}},fix:function(a){a=a||window.event;if(!a.target){a.target=a.srcElement||document}if(a.target.nodeType==3){a.target=a.target.parentNode}if(typeof a.metaKey==="undefined"){a.metaKey=a.ctrlKey}return a}};TrackLib.Dimension={getWindowSize:function(){var c=document;var a=(window.innerWidth)?window.innerWidth:(c.documentElement&&c.documentElement.clientWidth)?c.documentElement.clientWidth:(c.body&&c.body.clientWidth)?c.body.clientWidth:0;var b=(window.innerHeight)?window.innerHeight:(c.documentElement&&c.documentElement.clientHeight)?c.documentElement.clientHeight:(c.body&&c.body.clientHeight)?c.body.clientHeight:0;return{width:a,height:b}},getDocumentSize:function(){var c=document;var a=(window.innerWidth&&window.scrollMaxX)?window.innerWidth+window.scrollMaxX:(c.body&&c.body.scrollWidth>c.body.offsetWidth)?c.body.scrollWidth:(c.body&&c.body.offsetWidth)?c.body.offsetWidth:0;var b=(window.innerHeight&&window.scrollMaxY)?window.innerHeight+window.scrollMaxY:(c.body&&c.body.scrollHeight>c.body.offsetHeight)?c.body.scrollHeight:(c.body&&c.body.offsetHeight)?c.body.offsetHeight:0;return{width:a,height:b}},getPageSize:function(){var e=this.getWindowSize(),c=this.getDocumentSize();var a=(c.width<e.width)?e.width:c.width;var b=(c.height<e.height)?e.height:c.height;return{width:a,height:b}}};TrackLib.Util={sameDomain:function(){var e,b=true;for(var c=0,a=arguments.length;c<a;++c){if(c>0){b=(this.getDomain(e)==this.getDomain(arguments[c]))}e=arguments[c]}return b},getDomain:function(a){var b=a.split(/\/+/g)[1];return(typeof d==="undefined")?window.location.href:b}};